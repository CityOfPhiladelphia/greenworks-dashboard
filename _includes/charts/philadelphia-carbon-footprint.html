<canvas width="600" height="400">
  <script>
  (function () {
    // Pass data from Jekyll/liquid to JavaScript
    var rows = {{ site.data.philadelphia_carbon_footprint | jsonify }}

    var opts = {
      type: 'bar',
      data: {
        labels: pluck(rows, 'Year'),
        datasets: [
          {
			type: 'bar',
			label: 'Buildings',
            data: pluck(rows, 'Buildings'),
            backgroundColor: 'rgba(255, 99, 132, 0.2)',
            borderColor: 'rgba(255,99,132,1)',
            borderWidth: 0
          },
          {
			type: 'bar',
            label: 'Transportation',
            data: pluck(rows, 'Transportation'),
            backgroundColor: 'rgba(54, 162, 235, 0.2)',
            borderColor: 'rgba(54, 162, 235, 1)'
		  },
		  {
		  type: 'bar',
			label: 'Other',
			data: pluck(rows, 'Other (Waste and Industrial Emissions)'),
			backgroundColor: 'rgba(54, 162, 235, 0.2)',
			borderColor: 'rgba(54, 162, 135, 1)'
		},
		  {
			type: 'bar',
			label: 'Goal',
            data: pluck(rows, 'Total'),
            backgroundColor: 'rgba(54, 88, 235, 0.2)',
            borderColor: 'rgba(54, 88, 235, 1)'
		  }
        ]
	},
	  options: {
        scales: {
            xAxes: [{
                stacked: true
            }],
            yAxes: [{
                stacked: true
            }]
        }
      }
    }

    new Chart(getScriptParent(), opts)
  })()
  </script>
</canvas>
