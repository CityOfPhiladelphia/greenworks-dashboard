<canvas width="600" height="400">
  <script>
  (function () {
    // Pass data from Jekyll/liquid to JavaScript
    var rows = {{ site.data.philadelphia_carbon_footprint | jsonify }}

    var opts = {
      type: 'bar',
      data: {
        labels: pluck(rows, 'Year'),
        datasets: [
          {
						// type: 'bar',
						label: 'Buildings',
            data: pluck(rows, 'Buildings'),
						backgroundColor: 'rgba(249, 147, 0, 0.7)',
						borderColor: 'rgba(249, 147, 0, 1)',
						borderWidth: 0
          },
          {
						// type: 'bar',
            label: 'Transportation',
            data: pluck(rows, 'Transportation'),
						backgroundColor: 'rgba(54, 162, 235, 0.7)',
						borderColor: 'rgba(54, 162, 235, 1)',
						borderWidth: 0
					},
					{
					  // type: 'bar',
						label: 'Other (Waste and Industrial Emissions)',
						data: pluck(rows, 'Other'),
						backgroundColor: 'rgba(168, 191, 18, 0.7)',
            borderColor: 'rgba(168, 191, 18, 1)',
						borderWidth: 0
					}
					// {
					// 	type: 'bar',
					// 	label: 'Goal',
          //   data: pluck(rows, 'Total'),
					// 	backgroundColor: 'rgba(0, 170, 181, 1)',
          //   borderColor: 'rgba(0, 170, 181, 1)'
					//   }
    		]
			},
	  	options: {
				title: {
					display: true,
					text: 'Philadelphia Carbon Footprint',
					position: 'top'
				},
				scales: {
          xAxes: [{
              stacked: true
          }],
          yAxes: [{
            stacked: true,
						scaleLabel: {
							display: true,
							labelString: 'Metric Tons of CO2e Emitted'
						}
          }]
        },
				legend: {
					position: 'bottom'
				}
      }
    }

    new Chart(getScriptParent(), opts)
  })()
  </script>
</canvas>
