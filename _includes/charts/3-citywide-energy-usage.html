<canvas width="600" height="400">
  <script>
  (function () {
    // Pass data from Jekyll/liquid to JavaScript
    var rows = {{ site.data.citywide_energy_usage | jsonify }}


/* This combined chart type will need a 2nd custom scale due to difference in data domains
   See http://www.chartjs.org/docs/#advanced-usage-writing-new-scale-types  */

    var opts = {
      type: 'bar',
      data: {
        labels: pluck(rows, 'Year'),
        datasets: [
					{
						yAxisID: 'days',
						type: 'bar',
						label: 'Heating Degree Days  - base 65',
            data: pluck(rows, 'Heating Degree Days'),
            backgroundColor: 'rgba(239, 36, 119, 0.8)',
            borderColor: 'rgba(239, 36, 119, 1)',
						borderWidth: 0
					},
          {
						yAxisID: 'days',
						type: 'bar',
            label: 'Cooling Degree Days - base 65',
            data: pluck(rows, 'Cooling Degree Days'),
						backgroundColor: 'rgba(0, 170, 181, 0.8)',
						borderColor: 'rgba(0, 170, 181, 1)',
						borderWidth: 0
		  		},
					{
						yAxisID: 'mmbtus',
						type: 'line',
						label: 'Citywide Energy Usage (mmBtus)',
						data: pluck(rows, 'Citywide Energy Usage'),
						backgroundColor: 'rgba(168, 191, 18, 0.6)',
						borderColor: 'rgba(168, 191, 18, 1)'
					},
        ]
			},
		  options: {
				title: {
					display: true,
					position: 'top',
					text: 'Citywide Energy Use'
				},
        scales: {
            // xAxes: [{
            //     stacked: true
            // }],
          yAxes: [{
						id: 'days',
						// stacked: true,
						scaleLabel: {
							labelString: 'Days',
							display: true
						}
					},
					{
						id: 'mmbtus',
						scaleLabel: {
							labelString: 'mmBtus',
							display: true
						},
						type: 'linear',
						position: 'right'
        }]
        }
      }
    }

    new Chart(getScriptParent(), opts)
  })()
  </script>
</canvas>
